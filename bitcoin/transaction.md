#交易
##交易形式
1. 最常见的交易形式就是一个地址支付到另一个地址，因为比特币中一笔未花费的输出只能被使用一次，所以当输出金额大于交易所需的输入金额时，那么这笔交易的输出还包括向自己的“找零”。即一般的这种交易通常是一个输入两个输出。
2. 集合型交易：这种交易是多个输出向一个地址转账的形式。
3. 分散性交易：跟集合型交易正好相反，它由一个地址向多个地址转账，类似于公司的账户给员工发工资。
##交易的构建
###创建交易输入
交易的输入是之前未花费的输出，之前一直迷惑如何找到合法的未花费的输出？原来一般钱包应用都维护了使用本钱包秘钥锁定的未花费列表的小型数据库。完整的客户端包含所以未消费的输出副本。
####交易输入的结构

| 字段         | 描述                                 | 字节大小 |
| ------------ | ------------------------------------ | -------- |
| 交易         | 指向交易包含的被花费的UTXO的哈希指针 | 32个字节 |
| 输出索引     | 被花费的UTXO的索引号， 第⼀个是0     | 4字节    |
| 解锁脚本尺⼨ | ⽤字节表⽰的后⾯的解锁脚本⻓度       | 1-9字节  |
| 序列号       | 暂不清楚啥功能                       | 4字节    |

###创建交易输出
交易的输出被创建成为一个包含这笔数额的脚本形式，只有解答了这个脚本，才能获取里面的比特币。交易输出除了支付的数量和找零以外，还包含隐藏的手续费
####交易输出结构
| 字段                      | 描述                         | 字节大小 |
| ------------------------- | ---------------------------- | -------- |
| 交易总量（nValue)         | 用聪表示的比特币值           | 8个字节  |
| 锁定脚本（ scriptPubKey） | 定义其中的比特币该如何取出来 | 边长     |
|                           |                              |          |

##交易的结构
一笔交易是包含输入和输出的数据结构：

| 字段     | 描述                       | 大小      |
| -------- | -------------------------- | --------- |
| 版本     | 交易的版本号               | 4字节     |
| 输入数量 | 包含的输入数量             | 1-9个字节 |
| 输入     | 一个或多个输入             | 不定      |
| 输出数量 | 包含的输出数量             | 1-9个字节 |
| 输出     | 一个或多个输出             | 不定      |
| 锁定时间 | 一个unix时间戳或者区块高度 | 4字节     |

> 锁定时间：在比特币代码中的变量为`nLockTime`,它定义了该交易最早可以被加入区块的时间，一般的交易默认值为0，表示立即执行。如果锁定时间大于0小于5亿，就被称为区块高度，意思是在这个区块高度之前，该交易不能加入区块链；如果这个值大于5亿，则它被当做一个unix时间戳（从1970年1月1日以来的秒数），表示在这个时间点之前不能被加入到区块链中。