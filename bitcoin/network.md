##P2P网络架构
P2P网络是指位于同一网络中的计算机彼此对等，各个节点共同对外提供服务，不存在任何特殊的节点。也就是说它不存在服务端、中央化的服务以及层级结构。每个节点在对外提服务的同时也使用网络中其他节点提供的服务。
##比特币节点类型及分工
尽管在P2P网络中节点之间相互对等，但在比特币中根据功能的不同，对节点进行了功能划分。每个比特币节点都是路由、区块链数据库、挖矿、钱包功能的集合。在比特币网络中每个节点都参与验证并传播区块链信息，并维持与对等节点的连接。
###全节点
全节点拥有一份最新的、完整的区块链拷贝。它可以独立的校验所有交易，而不需要借由任何的外部参照。
###SPV节点
这些节点又叫轻量级节点，它们只保留了一部分区块链信息，然后通过一种"简单支付验证的"的方式来完成交易验证。该节点只下区块头，而不下载包含每个区块的交易信息，由此不包含交易信息的区块链，大小只有完整区块链的1/1000。spv节点不能构建所有可用于UTXO的全貌，因为他们不知道网络上所以交易的完整信息
###挖矿节点
挖矿节点就是我们说的矿工，它运行在一些计算能力特别强的硬件设备上，运行工作量证明(POW)算法，一相互竞争的方式生成新区块，并获得区块奖励。挖矿节点可以是全节点也可以是轻量节点，轻量级节点的依靠矿池矿池服务器维护的全节点信息进行挖矿。
###钱包
早前钱包也是全节点，它们多数运行在pc上，但是现在越来越多的钱包运行在只能手机上，由于全节点需要大量的存储空间，只能设备并不具备这样的条件，所以现在的钱包大多数是SPV节点。
在比特币中除了上述的主要节点以外，还有一些服务器和节点运行着其他协议，例如特殊矿池挖矿协议、轻量级客户端访问协议等。
##网络发现
当新的节点启动后，为了能够参与协作，它必须发现网络中的其他节点。新的节点必须至少发现一个网络中的可用节点并建立连接。由于比特币网络的拓扑结构并不基于地理位置，因此各个节点之间的地理信息完全无关。在新的节点连接时，可随机的选择比特币中存在的节点并与之连接。
那比特币中的新节点是如何发现发现网络中的对等节点的呢？
虽然在比特币中没有特殊节点，但是客户端中会维护一个地址列表，它列出了一些长期稳定运行的节点， 我们称之为“种子节点(seed nodes)”。 新节点不一定要连接到种子节点，但是连接到种子节点的好处就是可以快速发现网路中其他节点。
当新节点建立连接后，新节点将一条包含自身IP地址的消息发送给其相邻节点，相邻节点再将此addr消息一次转发给它自己的相邻节点，这样就保证了新节点被多个节点所接受、保证可连接的稳定性。另外，新节点可以向他的相邻节点发送getaddr消息，要求它返回其已知对等节点的ip地址列表。通过这种方式，节点可以找到需连接到的对等节点，并向网络中发布它的消息以便其他界定查找。
由于节点可以随时加入和离开，通讯路径是不可靠的，因此节点会持续的进行两项工作：在失去已有连接时发现新节点，并在其他节点启动时为其提供帮助。在节点启动后，他会记住它最近成功连接的对等节点;因此在他重新启动后迅速的与前线失去连接的节点进行连接，假如先前的对等节点无应答，即连接超时，那么使用种子节点进行重启动。
##Bloom过滤器
Bloom过滤器是一个允许用户描述特定的关键词组合而不必精确表达的基于概率的过滤方法。它能让用户有效搜索关键词的同时保护他们的隐私。在SPV节点里，这一方法被用来向对等节点发送交易信息查询请求，同时查询地址不被暴露